(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{13:function(e,t,n){},16:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),u=n(2),l=function(e){var t=e.text,n=e.person,r=e.handleDelete;e.persons;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return r(n)}},t))},s=function(e){var t=e.person,n=e.setPersons,r=e.handleDelete,o=e.persons;return a.a.createElement("li",null,t.name," ",t.number," ",a.a.createElement(l,{persons:o,person:t,text:"Delete",setPersons:n,handleDelete:r}))},i=function(e){var t=e.personsToShow,n=e.handleDelete;return a.a.createElement("div",null,a.a.createElement("ul",null,t.map(function(e){return a.a.createElement(s,{person:e,key:e.name,handleDelete:n})})))},m=function(e){return a.a.createElement("div",null,"Filter shown with:",a.a.createElement("input",{value:e.newFilter,onChange:function(t){console.log(t.target.value),e.setNewFilter(t.target.value)}}))},f=n(15),p=n(3),d=n.n(p),b="/api/persons",h=function(){return d.a.get(b).then(function(e){return e.data})},g=function(e){return d.a.post(b,e).then(function(e){return e.data})},w=function(e,t){return d.a.put("".concat(b,"/").concat(e),t).then(function(e){return e.data})},v=function(e){return d.a.delete("".concat(b,"/").concat(e)).then(function(e){return e.data})};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var O=function(e){var t=e.newName,n=e.newNumber,r=e.setNewName,o=e.setNewNumber,c=e.setPersons,u=e.persons,l=e.setMessage,s=e.setMessageType;e.message;return a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),u.map(function(e){return e.name.toLowerCase()}).includes(t.toLowerCase())){if(window.confirm("".concat(t," is already in the phone book. Replace the old number with the new one?"))){var a=u.find(function(e){return e.name===t}),i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{number:n});return w(a.id,i).then(c(u.map(function(e){return e.name===t?i:e}))).then(s("success")).then(l("".concat(t," updated"))).then(setTimeout(function(){l(null)},2e3)).catch(function(e){s("error"),l(" '".concat(t,"' was already removed from the phonebook")),setTimeout(function(){l(null)},2e3),console.log(e)})}}else console.log("personObject still running"),g({name:t,number:n}).then(function(e){c(u.concat(e)),r(""),o(""),console.log("create still running"),s("success"),l("".concat(t," added")),setTimeout(function(){l(null)},3e3)}).catch(function(e){console.log("error running"),console.log(e.response),s("error"),l(e.response.data.error),setTimeout(function(){l(null)},3e3)})}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:t,onChange:function(e){console.log(e.target.value),r(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:n,onChange:function(e){console.log(e.target.value),o(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},j=(n(13),function(e){var t=e.message,n=e.messageType;return null===t?null:"error"===n?a.a.createElement("div",{className:"error"},t):"success"===n?a.a.createElement("div",{className:"success"},t):void 0}),y=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),l=Object(u.a)(c,2),s=l[0],f=l[1],p=Object(r.useState)(""),d=Object(u.a)(p,2),b=d[0],g=d[1],w=Object(r.useState)(""),E=Object(u.a)(w,2),y=E[0],N=E[1],T=Object(r.useState)(n),D=Object(u.a)(T,2),P=D[0],S=D[1],k=Object(r.useState)(null),C=Object(u.a)(k,2),F=C[0],L=C[1],M=Object(r.useState)("success"),x=Object(u.a)(M,2),J=x[0],A=x[1];Object(r.useEffect)(function(){h().then(function(e){o(e)}).catch(function(e){A("error"),L("Unable to get names from the server"),setTimeout(function(){L(null)},2e3)})},[]);var B=n;return B=B=""===y?n:n.filter(function(e){return e.name.toLowerCase().includes(y.toLowerCase())}),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement("h3",null,a.a.createElement(j,{message:F,messageType:J})),a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement(m,{newFilter:y,setNewFilter:N,newToDisplay:P,setToDisplay:S}))),a.a.createElement("h2",null,"To Add"),a.a.createElement(O,{newName:s,setNewName:f,newNumber:b,setNewNumber:g,persons:n,setPersons:o,setMessage:L,setMessageType:A,message:F}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(i,{personsToShow:B,setPerson:o,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&v(e.id).then(o(n.filter(function(t){return t.id!==e.id}))).then(A("success")).then(L("".concat(e.name," deleted"))).then(setTimeout(function(){L(null)},2e3)).catch(function(t){A("error"),L("".concat(e.name," wasn't deleted")),setTimeout(function(){L(null)},2e3)})},persons:n}))};c.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.5523f45f.chunk.js.map